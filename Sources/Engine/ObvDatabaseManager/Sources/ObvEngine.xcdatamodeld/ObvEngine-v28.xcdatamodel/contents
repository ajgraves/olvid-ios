<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<model type="com.apple.IDECoreDataModeler.DataModel" documentVersion="1.0" lastSavedToolsVersion="17709" systemVersion="20C69" minimumToolsVersion="Automatic" sourceLanguage="Swift" userDefinedModelVersionIdentifier="ObvEngineModel-v28">
    <entity name="Backup" representedClassName="Backup" syncable="YES">
        <attribute name="backupJsonVersion" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="encryptedContentRaw" optional="YES" attributeType="Binary"/>
        <attribute name="forExport" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="rawBackupKeyUid" attributeType="Binary"/>
        <attribute name="statusChangeTimestamp" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="statusRaw" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="version" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <relationship name="rawBackupKey" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="BackupKey" inverseName="backups" inverseEntity="BackupKey"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawBackupKeyUid"/>
                <constraint value="version"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="BackupKey" representedClassName="BackupKey" syncable="YES">
        <attribute name="encryptionPublicKeyRaw" attributeType="Binary"/>
        <attribute name="keyGenerationTimestamp" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="lastKeyVerificationPromptTimestamp" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="lastSuccessfulKeyVerificationTimestamp" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="macKeyRaw" attributeType="Binary"/>
        <attribute name="successfulVerificationCount" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="uidRaw" attributeType="Binary"/>
        <relationship name="backups" toMany="YES" deletionRule="Cascade" destinationEntity="Backup" inverseName="rawBackupKey" inverseEntity="Backup"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="uidRaw"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="ChannelCreationWithContactDeviceProtocolInstance" representedClassName="ChannelCreationWithContactDeviceProtocolInstance" syncable="YES">
        <attribute name="contactDeviceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="contactIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <relationship name="protocolInstance" maxCount="1" deletionRule="Nullify" destinationEntity="ProtocolInstance" inverseName="channelCreationProtocolInstanceInWaitingState" inverseEntity="ProtocolInstance"/>
    </entity>
    <entity name="ContactDevice" representedClassName="ContactDevice" syncable="YES">
        <attribute name="uid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <relationship name="contactIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="devices" inverseEntity="ContactIdentity"/>
    </entity>
    <entity name="ContactGroup" representedClassName="ContactGroup" isAbstract="YES" syncable="YES">
        <attribute name="groupMembersVersion" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="groupUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <relationship name="groupMembers" toMany="YES" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="contactGroups" inverseEntity="ContactIdentity"/>
        <relationship name="ownedIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="contactGroups" inverseEntity="OwnedIdentity"/>
        <relationship name="pendingGroupMembers" toMany="YES" deletionRule="Cascade" destinationEntity="PendingGroupMember" inverseName="contactGroup" inverseEntity="PendingGroupMember"/>
        <relationship name="publishedDetails" maxCount="1" deletionRule="Cascade" destinationEntity="ContactGroupDetailsPublished" inverseName="contactGroup" inverseEntity="ContactGroupDetailsPublished"/>
    </entity>
    <entity name="ContactGroupDetails" representedClassName="ContactGroupDetails" isAbstract="YES" syncable="YES">
        <attribute name="photoServerKeyEncoded" optional="YES" attributeType="Binary"/>
        <attribute name="photoServerLabel" optional="YES" attributeType="String"/>
        <attribute name="photoURL" optional="YES" attributeType="URI"/>
        <attribute name="serializedCoreDetails" attributeType="Binary"/>
        <attribute name="version" attributeType="Integer 64" minValueString="-1" usesScalarValueType="YES"/>
    </entity>
    <entity name="ContactGroupDetailsLatest" representedClassName="ContactGroupDetailsLatest" parentEntity="ContactGroupDetails" syncable="YES">
        <relationship name="contactGroupOwned" maxCount="1" deletionRule="Nullify" destinationEntity="ContactGroupOwned" inverseName="latestDetails" inverseEntity="ContactGroupOwned"/>
    </entity>
    <entity name="ContactGroupDetailsPublished" representedClassName="ContactGroupDetailsPublished" parentEntity="ContactGroupDetails" syncable="YES">
        <relationship name="contactGroup" maxCount="1" deletionRule="Nullify" destinationEntity="ContactGroup" inverseName="publishedDetails" inverseEntity="ContactGroup"/>
    </entity>
    <entity name="ContactGroupDetailsTrusted" representedClassName="ContactGroupDetailsTrusted" parentEntity="ContactGroupDetails" syncable="YES">
        <relationship name="contactGroupJoined" maxCount="1" deletionRule="Nullify" destinationEntity="ContactGroupJoined" inverseName="trustedDetails" inverseEntity="ContactGroupJoined"/>
    </entity>
    <entity name="ContactGroupJoined" representedClassName="ContactGroupJoined" parentEntity="ContactGroup" syncable="YES">
        <relationship name="groupOwner" maxCount="1" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="contactGroupsOwned" inverseEntity="ContactIdentity"/>
        <relationship name="trustedDetails" maxCount="1" deletionRule="Cascade" destinationEntity="ContactGroupDetailsTrusted" inverseName="contactGroupJoined" inverseEntity="ContactGroupDetailsTrusted"/>
    </entity>
    <entity name="ContactGroupOwned" representedClassName="ContactGroupOwned" parentEntity="ContactGroup" syncable="YES">
        <relationship name="latestDetails" maxCount="1" deletionRule="Cascade" destinationEntity="ContactGroupDetailsLatest" inverseName="contactGroupOwned" inverseEntity="ContactGroupDetailsLatest"/>
    </entity>
    <entity name="ContactIdentity" representedClassName="ContactIdentity" syncable="YES">
        <attribute name="cryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="trustLevelRaw" attributeType="String"/>
        <relationship name="contactGroups" toMany="YES" deletionRule="Nullify" destinationEntity="ContactGroup" inverseName="groupMembers" inverseEntity="ContactGroup"/>
        <relationship name="contactGroupsOwned" toMany="YES" deletionRule="Deny" destinationEntity="ContactGroupJoined" inverseName="groupOwner" inverseEntity="ContactGroupJoined"/>
        <relationship name="devices" toMany="YES" deletionRule="Cascade" destinationEntity="ContactDevice" inverseName="contactIdentity" inverseEntity="ContactDevice"/>
        <relationship name="ownedIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="contactIdentities" inverseEntity="OwnedIdentity"/>
        <relationship name="persistedTrustOrigins" toMany="YES" deletionRule="Cascade" destinationEntity="PersistedTrustOrigin" inverseName="contact" inverseEntity="PersistedTrustOrigin"/>
        <relationship name="publishedIdentityDetails" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ContactIdentityDetailsPublished" inverseName="contactIdentity" inverseEntity="ContactIdentityDetailsPublished"/>
        <relationship name="trustedIdentityDetails" maxCount="1" deletionRule="Cascade" destinationEntity="ContactIdentityDetailsTrusted" inverseName="contactIdentity" inverseEntity="ContactIdentityDetailsTrusted"/>
    </entity>
    <entity name="ContactIdentityDetails" representedClassName="ContactIdentityDetails" isAbstract="YES" syncable="YES">
        <attribute name="photoURL" optional="YES" attributeType="URI"/>
        <attribute name="serializedIdentityCoreDetails" attributeType="Binary"/>
        <attribute name="version" attributeType="Integer 64" usesScalarValueType="YES"/>
    </entity>
    <entity name="ContactIdentityDetailsPublished" representedClassName="ContactIdentityDetailsPublished" parentEntity="ContactIdentityDetails" syncable="YES">
        <attribute name="photoServerKeyEncoded" optional="YES" attributeType="Binary"/>
        <attribute name="photoServerLabel" optional="YES" attributeType="String"/>
        <relationship name="contactIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="publishedIdentityDetails" inverseEntity="ContactIdentity"/>
    </entity>
    <entity name="ContactIdentityDetailsTrusted" representedClassName="ContactIdentityDetailsTrusted" parentEntity="ContactIdentityDetails" syncable="YES">
        <relationship name="contactIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="trustedIdentityDetails" inverseEntity="ContactIdentity"/>
    </entity>
    <entity name="DeletedOutboxMessage" representedClassName="DeletedOutboxMessage" syncable="YES">
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="timestampFromServer" attributeType="Date" usesScalarValueType="NO"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="InboxAttachment" representedClassName="InboxAttachment" syncable="YES">
        <attribute name="attachmentNumber" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="encodedAuthenticatedDecryptionKey" optional="YES" attributeType="Binary"/>
        <attribute name="expectedChunkLength" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="initialByteCountToDownload" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="metadata" optional="YES" attributeType="Binary"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="rawStatus" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <relationship name="chunks" toMany="YES" deletionRule="Cascade" destinationEntity="InboxAttachmentChunk" inverseName="attachment" inverseEntity="InboxAttachmentChunk"/>
        <relationship name="message" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="InboxMessage" inverseName="dbAttachments" inverseEntity="InboxMessage"/>
        <relationship name="session" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="InboxAttachmentSession" inverseName="attachment" inverseEntity="InboxAttachmentSession"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
                <constraint value="attachmentNumber"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="InboxAttachmentChunk" representedClassName="InboxAttachmentChunk" syncable="YES">
        <attribute name="attachmentNumber" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="chunkNumber" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="ciphertextChunkLength" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="cleartextChunkWasWrittenToAttachmentFile" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="downloadedTimeStamp" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="encryptedChunkURL" optional="YES" attributeType="URI"/>
        <attribute name="rawCleartextChunkLength" optional="YES" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="signedURL" optional="YES" attributeType="URI"/>
        <relationship name="attachment" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="InboxAttachment" inverseName="chunks" inverseEntity="InboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
                <constraint value="attachmentNumber"/>
                <constraint value="chunkNumber"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="InboxAttachmentSession" representedClassName="InboxAttachmentSession" syncable="YES">
        <attribute name="rawIdentifier" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="timestamp" attributeType="Date" usesScalarValueType="NO"/>
        <relationship name="attachment" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="InboxAttachment" inverseName="session" inverseEntity="InboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawIdentifier"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="InboxMessage" representedClassName="InboxMessage" syncable="YES">
        <attribute name="downloadTimestampFromServer" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="encryptedContent" attributeType="Transformable" valueTransformerName="EncryptedDataTransformer" customClassName="EncryptedData"/>
        <attribute name="fromCryptoIdentity" optional="YES" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="markedForDeletion" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="messagePayload" optional="YES" attributeType="Binary"/>
        <attribute name="messageUploadTimestampFromServer" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="rawMessageIdUid" attributeType="Binary" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="wrappedKey" attributeType="Transformable" valueTransformerName="EncryptedDataTransformer" customClassName="EncryptedData"/>
        <relationship name="dbAttachments" optional="YES" toMany="YES" deletionRule="Cascade" ordered="YES" destinationEntity="InboxAttachment" inverseName="message" inverseEntity="InboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="KeyMaterial" representedClassName="KeyMaterial" syncable="YES">
        <attribute name="cryptoKeyId" attributeType="Binary"/>
        <attribute name="encodedKey" attributeType="Binary"/>
        <attribute name="expirationTimestamp" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="selfRatchetingCount" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <relationship name="provision" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="Provision" inverseName="receiveKeys" inverseEntity="Provision"/>
    </entity>
    <entity name="LinkBetweenProtocolInstances" representedClassName="LinkBetweenProtocolInstances" syncable="YES">
        <attribute name="childProtocolInstanceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="expectedChildStateRawId" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="messageToSendRawId" attributeType="Integer 64" usesScalarValueType="YES"/>
        <relationship name="parentProtocolInstance" maxCount="1" deletionRule="Nullify" destinationEntity="ProtocolInstance" inverseName="linkBetweenProtocolInstance" inverseEntity="ProtocolInstance"/>
    </entity>
    <entity name="MessageHeader" representedClassName="MessageHeader" syncable="YES">
        <attribute name="deviceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="toCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="wrappedKey" attributeType="Transformable" valueTransformerName="EncryptedDataTransformer" customClassName="EncryptedData"/>
        <relationship name="message" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OutboxMessage" inverseName="headers" inverseEntity="OutboxMessage"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
                <constraint value="deviceUid"/>
                <constraint value="toCryptoIdentity"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="ObvObliviousChannel" representedClassName="ObvObliviousChannel" syncable="YES">
        <attribute name="aFullRatchetOfTheSendSeedIsInProgress" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="cryptoSuiteVersion" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="currentDeviceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="fullRatchetingCountOfLastProvision" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="isConfirmed" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="numberOfDecryptedMessagesSinceLastFullRatchetSentMessage" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="numberOfEncryptedMessages" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="numberOfEncryptedMessagesAtTheTimeOfTheLastFullRatchet" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="numberOfEncryptedMessagesSinceLastFullRatchetSentMessage" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="remoteCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="remoteDeviceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="seedForNextSendKey" optional="YES" attributeType="Transformable" valueTransformerName="SeedTransformer" customClassName="Seed"/>
        <attribute name="timestampOfLastFullRatchet" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="timestampOfLastFullRatchetSentMessage" attributeType="Date" usesScalarValueType="NO"/>
        <relationship name="provisions" toMany="YES" deletionRule="Cascade" destinationEntity="Provision" inverseName="obliviousChannel" inverseEntity="Provision"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="currentDeviceUid"/>
                <constraint value="remoteCryptoIdentity"/>
                <constraint value="remoteDeviceUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="OutboxAttachment" representedClassName="OutboxAttachment" syncable="YES">
        <attribute name="attachmentLength" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="attachmentNumber" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="cancelExternallyRequested" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="deleteAfterSend" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="encodedAuthenticatedEncryptionKey" attributeType="Binary"/>
        <attribute name="fileURL" attributeType="URI"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <relationship name="chunks" toMany="YES" deletionRule="Cascade" destinationEntity="OutboxAttachmentChunk" inverseName="attachment" inverseEntity="OutboxAttachmentChunk"/>
        <relationship name="message" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OutboxMessage" inverseName="unsortedAttachments" inverseEntity="OutboxMessage"/>
        <relationship name="session" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OutboxAttachmentSession" inverseName="attachment" inverseEntity="OutboxAttachmentSession"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
                <constraint value="attachmentNumber"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="OutboxAttachmentChunk" representedClassName="OutboxAttachmentChunk" syncable="YES">
        <attribute name="acknowledgedTimeStamp" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="attachmentNumber" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="chunkNumber" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="ciphertextChunkLength" attributeType="Integer 64" minValueString="0" usesScalarValueType="YES"/>
        <attribute name="cleartextChunkLength" attributeType="Integer 64" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="dummyVariableForMigration" optional="YES" attributeType="Boolean" defaultValueString="YES" usesScalarValueType="YES"/>
        <attribute name="encryptedChunkURL" optional="YES" attributeType="URI"/>
        <attribute name="rawAcknowledgerAppType" optional="YES" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="signedURL" optional="YES" attributeType="URI"/>
        <relationship name="attachment" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OutboxAttachment" inverseName="chunks" inverseEntity="OutboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
                <constraint value="attachmentNumber"/>
                <constraint value="chunkNumber"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="OutboxAttachmentSession" representedClassName="OutboxAttachmentSession" syncable="YES">
        <attribute name="rawAppType" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="rawIdentifier" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="timestamp" attributeType="Date" usesScalarValueType="NO"/>
        <relationship name="attachment" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OutboxAttachment" inverseName="session" inverseEntity="OutboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawIdentifier"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="OutboxMessage" representedClassName="OutboxMessage" syncable="YES">
        <attribute name="cancelExternallyRequested" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="encryptedContent" attributeType="Transformable" valueTransformerName="EncryptedDataTransformer" customClassName="EncryptedData"/>
        <attribute name="isAppMessageWithUserContent" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="isVoipMessage" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <attribute name="nonceFromServer" optional="YES" attributeType="Binary"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="rawMessageUidFromServer" optional="YES" attributeType="Binary" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="serverURL" attributeType="URI"/>
        <attribute name="timestampFromServer" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="uploaded" attributeType="Boolean" defaultValueString="NO" usesScalarValueType="YES"/>
        <relationship name="headers" toMany="YES" deletionRule="Cascade" destinationEntity="MessageHeader" inverseName="message" inverseEntity="MessageHeader"/>
        <relationship name="unsortedAttachments" toMany="YES" deletionRule="Cascade" destinationEntity="OutboxAttachment" inverseName="message" inverseEntity="OutboxAttachment"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="OwnedDevice" representedClassName="OwnedDevice" syncable="YES">
        <attribute name="uid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <relationship name="currentDeviceIdentity" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="currentDevice" inverseEntity="OwnedIdentity"/>
        <relationship name="remoteDeviceIdentity" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="otherDevices" inverseEntity="OwnedIdentity"/>
    </entity>
    <entity name="OwnedIdentity" representedClassName="OwnedIdentity" syncable="YES">
        <attribute name="apiKey" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="cryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="isActive" attributeType="Boolean" defaultValueString="YES" usesScalarValueType="YES"/>
        <attribute name="ownedCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvOwnedCryptoIdentityTransformer" customClassName="ObvOwnedCryptoIdentity"/>
        <relationship name="contactGroups" toMany="YES" deletionRule="Cascade" destinationEntity="ContactGroup" inverseName="ownedIdentity" inverseEntity="ContactGroup"/>
        <relationship name="contactIdentities" toMany="YES" deletionRule="Cascade" destinationEntity="ContactIdentity" inverseName="ownedIdentity" inverseEntity="ContactIdentity"/>
        <relationship name="currentDevice" maxCount="1" deletionRule="Cascade" destinationEntity="OwnedDevice" inverseName="currentDeviceIdentity" inverseEntity="OwnedDevice"/>
        <relationship name="latestIdentityDetails" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="OwnedIdentityDetailsLatest" inverseName="ownedIdentity" inverseEntity="OwnedIdentityDetailsLatest"/>
        <relationship name="maskingUID" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="OwnedIdentityMaskingUID" inverseName="ownedIdentity" inverseEntity="OwnedIdentityMaskingUID"/>
        <relationship name="otherDevices" toMany="YES" deletionRule="Cascade" destinationEntity="OwnedDevice" inverseName="remoteDeviceIdentity" inverseEntity="OwnedDevice"/>
        <relationship name="publishedIdentityDetails" maxCount="1" deletionRule="Cascade" destinationEntity="OwnedIdentityDetailsPublished" inverseName="ownedIdentity" inverseEntity="OwnedIdentityDetailsPublished"/>
    </entity>
    <entity name="OwnedIdentityDetails" representedClassName="OwnedIdentityDetails" isAbstract="YES" syncable="YES">
        <attribute name="photoURL" optional="YES" attributeType="URI"/>
        <attribute name="serializedIdentityCoreDetails" attributeType="Binary"/>
        <attribute name="version" attributeType="Integer 64" usesScalarValueType="YES"/>
    </entity>
    <entity name="OwnedIdentityDetailsLatest" representedClassName="OwnedIdentityDetailsLatest" parentEntity="OwnedIdentityDetails" syncable="YES">
        <relationship name="ownedIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="latestIdentityDetails" inverseEntity="OwnedIdentity"/>
    </entity>
    <entity name="OwnedIdentityDetailsPublished" representedClassName="OwnedIdentityDetailsPublished" parentEntity="OwnedIdentityDetails" syncable="YES">
        <attribute name="photoServerKeyEncoded" optional="YES" attributeType="Binary"/>
        <attribute name="photoServerLabel" optional="YES" attributeType="String"/>
        <attribute name="publicationDate" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <relationship name="ownedIdentity" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="publishedIdentityDetails" inverseEntity="OwnedIdentity"/>
    </entity>
    <entity name="OwnedIdentityMaskingUID" representedClassName="OwnedIdentityMaskingUID" syncable="YES">
        <attribute name="maskingUID" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <relationship name="ownedIdentity" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="OwnedIdentity" inverseName="maskingUID" inverseEntity="OwnedIdentity"/>
    </entity>
    <entity name="PendingDeleteFromServer" representedClassName="PendingDeleteFromServer" syncable="YES">
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="PendingGroupMember" representedClassName="PendingGroupMember" syncable="YES">
        <attribute name="cryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="declined" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="serializedIdentityCoreDetails" attributeType="Binary"/>
        <relationship name="contactGroup" maxCount="1" deletionRule="Nullify" destinationEntity="ContactGroup" inverseName="pendingGroupMembers" inverseEntity="ContactGroup"/>
    </entity>
    <entity name="PendingServerQuery" representedClassName="PendingServerQuery" syncable="YES">
        <attribute name="encodedElements" attributeType="Binary"/>
        <attribute name="encodedQueryType" attributeType="Binary"/>
        <attribute name="encodedResponseType" optional="YES" attributeType="Binary"/>
        <attribute name="ownedIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
    </entity>
    <entity name="PersistedEngineDialog" representedClassName="PersistedEngineDialog" syncable="YES">
        <attribute name="encodedObvDialog" attributeType="Transformable" valueTransformerName="ObvEncodedTransformer" customClassName="ObvEncoded"/>
        <attribute name="resendCounter" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="uuid" attributeType="UUID" usesScalarValueType="NO"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="uuid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="PersistedTrustOrigin" representedClassName="PersistedTrustOrigin" syncable="YES">
        <attribute name="identityServer" optional="YES" attributeType="String"/>
        <attribute name="mediatorOrGroupOwnerCryptoIdentity" optional="YES" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="mediatorOrGroupOwnerTrustLevelMajor" optional="YES" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="timestamp" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="trustTypeRaw" attributeType="Integer 64" usesScalarValueType="YES"/>
        <relationship name="contact" maxCount="1" deletionRule="Nullify" destinationEntity="ContactIdentity" inverseName="persistedTrustOrigins" inverseEntity="ContactIdentity"/>
    </entity>
    <entity name="ProtocolInstance" representedClassName="ProtocolInstance" syncable="YES">
        <attribute name="cryptoProtocolRawId" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="currentStateRawId" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="encodedCurrentState" attributeType="Transformable" valueTransformerName="ObvEncodedTransformer" customClassName="ObvEncoded"/>
        <attribute name="ownedCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="uid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <relationship name="channelCreationProtocolInstanceInWaitingState" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ChannelCreationWithContactDeviceProtocolInstance" inverseName="protocolInstance" inverseEntity="ChannelCreationWithContactDeviceProtocolInstance"/>
        <relationship name="linkBetweenProtocolInstance" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="LinkBetweenProtocolInstances" inverseName="parentProtocolInstance" inverseEntity="LinkBetweenProtocolInstances"/>
        <relationship name="waitingForTrustLevelIncrease" toMany="YES" deletionRule="Cascade" destinationEntity="ProtocolInstanceWaitingForTrustLevelIncrease" inverseName="protocolInstance" inverseEntity="ProtocolInstanceWaitingForTrustLevelIncrease"/>
    </entity>
    <entity name="ProtocolInstanceWaitingForTrustLevelIncrease" representedClassName="ProtocolInstanceWaitingForTrustLevelIncrease" syncable="YES">
        <attribute name="contactCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="messageToSendRawId" attributeType="Integer 64" valueTransformerName="UIDTransformer" usesScalarValueType="YES" customClassName="UID"/>
        <attribute name="ownedCryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="targetTrustLevelRaw" attributeType="String"/>
        <relationship name="protocolInstance" maxCount="1" deletionRule="Nullify" destinationEntity="ProtocolInstance" inverseName="waitingForTrustLevelIncrease" inverseEntity="ProtocolInstance"/>
    </entity>
    <entity name="Provision" representedClassName="Provision" syncable="YES">
        <attribute name="cryptoSuiteVersion" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="fullRatchetingCount" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="seedForNextProvisionedReceiveKey" attributeType="Transformable" valueTransformerName="SeedTransformer" customClassName="Seed"/>
        <attribute name="selfRatchetingCount" attributeType="Integer 64" minValueString="0" defaultValueString="0" usesScalarValueType="YES"/>
        <relationship name="obliviousChannel" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ObvObliviousChannel" inverseName="provisions" inverseEntity="ObvObliviousChannel"/>
        <relationship name="receiveKeys" toMany="YES" deletionRule="Cascade" destinationEntity="KeyMaterial" inverseName="provision" inverseEntity="KeyMaterial"/>
    </entity>
    <entity name="ReceivedMessage" representedClassName="ReceivedMessage" syncable="YES">
        <attribute name="encodedEncodedInputs" attributeType="Transformable" valueTransformerName="ObvEncodedTransformer" customClassName="ObvEncoded"/>
        <attribute name="encodedUserDialogResponse" optional="YES" attributeType="Transformable" valueTransformerName="ObvEncodedTransformer" customClassName="ObvEncoded"/>
        <attribute name="protocolInstanceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="protocolMessageRawId" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="protocolRawId" attributeType="Integer 64" usesScalarValueType="YES"/>
        <attribute name="rawMessageIdOwnedIdentity" attributeType="Binary"/>
        <attribute name="rawMessageIdUid" attributeType="Binary"/>
        <attribute name="receptionChannelInfo" attributeType="Binary"/>
        <attribute name="timestamp" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="userDialogUuid" optional="YES" attributeType="UUID" usesScalarValueType="NO"/>
        <uniquenessConstraints>
            <uniquenessConstraint>
                <constraint value="rawMessageIdOwnedIdentity"/>
                <constraint value="rawMessageIdUid"/>
            </uniquenessConstraint>
        </uniquenessConstraints>
    </entity>
    <entity name="RegisteredPushNotification" representedClassName="RegisteredPushNotification" syncable="YES">
        <attribute name="creationDate" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="cryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="deviceUid" attributeType="Transformable" valueTransformerName="UIDTransformer" customClassName="UID"/>
        <attribute name="pollingIdentifier" optional="YES" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="pushNotificationType" attributeType="Binary"/>
    </entity>
    <entity name="ServerSession" representedClassName="ServerSession" syncable="YES">
        <attribute name="cryptoIdentity" attributeType="Transformable" valueTransformerName="ObvCryptoIdentityTransformer" customClassName="ObvCryptoIdentity"/>
        <attribute name="nonce" optional="YES" attributeType="Binary"/>
        <attribute name="response" optional="YES" attributeType="Binary"/>
        <attribute name="token" optional="YES" attributeType="Binary"/>
    </entity>
    <elements>
        <element name="Backup" positionX="134.578125" positionY="-588.16796875" width="128" height="28"/>
        <element name="BackupKey" positionX="-567" positionY="-828" width="128" height="163"/>
        <element name="ChannelCreationWithContactDeviceProtocolInstance" positionX="-775.30859375" positionY="-262.85546875" width="128" height="90"/>
        <element name="ContactDevice" positionX="2195.02734375" positionY="-327.51171875" width="171.4921875" height="75"/>
        <element name="ContactGroup" positionX="3351.1796875" positionY="-416.11328125" width="269.96875" height="135"/>
        <element name="ContactGroupDetails" positionX="3377.75390625" positionY="104.87890625" width="128" height="118"/>
        <element name="ContactGroupDetailsLatest" positionX="3630.79296875" positionY="-152.47265625" width="172.6875" height="60"/>
        <element name="ContactGroupDetailsPublished" positionX="3362.515625" positionY="-42.80859375" width="185.98046875" height="60"/>
        <element name="ContactGroupDetailsTrusted" positionX="2910.4453125" positionY="-86.26953125" width="196.05078125" height="60"/>
        <element name="ContactGroupJoined" positionX="3148.4609375" positionY="-242.71875" width="128" height="75"/>
        <element name="ContactGroupOwned" positionX="3727.28515625" positionY="-375.1875" width="128" height="60"/>
        <element name="ContactIdentity" positionX="2448.8203125" positionY="-301.91796875" width="310.11328125" height="178"/>
        <element name="ContactIdentityDetails" positionX="2464.17578125" positionY="160.4609375" width="220.75" height="88"/>
        <element name="ContactIdentityDetailsPublished" positionX="2643.640625" positionY="-17.29296875" width="198.1953125" height="88"/>
        <element name="ContactIdentityDetailsTrusted" positionX="2368.51953125" positionY="-35.7265625" width="207.98828125" height="60"/>
        <element name="DeletedOutboxMessage" positionX="-576" positionY="-837" width="128" height="88"/>
        <element name="InboxAttachment" positionX="-606.2734375" positionY="839.44140625" width="299.8359375" height="208"/>
        <element name="InboxAttachmentChunk" positionX="-576" positionY="-837" width="128" height="208"/>
        <element name="InboxAttachmentSession" positionX="-567" positionY="-828" width="128" height="88"/>
        <element name="InboxMessage" positionX="-161.9453125" positionY="975.4296875" width="192.21484375" height="193"/>
        <element name="KeyMaterial" positionX="636.9296875" positionY="-162.421875" width="179.66015625" height="120"/>
        <element name="LinkBetweenProtocolInstances" positionX="-437.515625" positionY="-276.57421875" width="188.51171875" height="105"/>
        <element name="MessageHeader" positionX="1449.22265625" positionY="1016.6953125" width="128" height="133"/>
        <element name="ObvObliviousChannel" positionX="-148.109375" positionY="-327.14453125" width="372.87890625" height="270"/>
        <element name="OutboxAttachment" positionX="613.07421875" positionY="927.0859375" width="282.58984375" height="208"/>
        <element name="OutboxAttachmentChunk" positionX="-576" positionY="-837" width="128" height="223"/>
        <element name="OutboxAttachmentSession" positionX="-576" positionY="-837" width="128" height="103"/>
        <element name="OutboxMessage" positionX="1144.3359375" positionY="926.91015625" width="195.1640625" height="224"/>
        <element name="OwnedDevice" positionX="2164.15234375" positionY="-526.953125" width="128" height="90"/>
        <element name="OwnedIdentity" positionX="2449.828125" positionY="-603.53515625" width="284.53125" height="208"/>
        <element name="OwnedIdentityDetails" positionX="2474.8984375" positionY="-982.16015625" width="199.6171875" height="88"/>
        <element name="OwnedIdentityDetailsLatest" positionX="2609.96875" positionY="-764.3359375" width="185.92578125" height="60"/>
        <element name="OwnedIdentityDetailsPublished" positionX="2369.78125" positionY="-764.09375" width="190.6875" height="103"/>
        <element name="OwnedIdentityMaskingUID" positionX="2817.48046875" positionY="-693.33203125" width="195.06640625" height="75"/>
        <element name="PendingDeleteFromServer" positionX="864.33203125" positionY="-524.21484375" width="252.421875" height="73"/>
        <element name="PendingGroupMember" positionX="3328.61328125" positionY="-706.39453125" width="208.90625" height="105"/>
        <element name="PendingServerQuery" positionX="935.828125" positionY="782.2421875" width="236.55078125" height="105"/>
        <element name="PersistedEngineDialog" positionX="-249.69921875" positionY="691.67578125" width="128" height="90"/>
        <element name="PersistedTrustOrigin" positionX="2120.71484375" positionY="-236.3671875" width="242.96484375" height="135"/>
        <element name="ProtocolInstance" positionX="-361.76171875" positionY="-14.296875" width="128" height="165"/>
        <element name="ProtocolInstanceWaitingForTrustLevelIncrease" positionX="-669.7265625" positionY="94.1875" width="128" height="120"/>
        <element name="Provision" positionX="310.9375" positionY="-177.27734375" width="205.42578125" height="135"/>
        <element name="ReceivedMessage" positionX="262.3125" positionY="125.6796875" width="372.3359375" height="193"/>
        <element name="RegisteredPushNotification" positionX="-236.94921875" positionY="811.61328125" width="286.41015625" height="120"/>
        <element name="ServerSession" positionX="-532.91015625" positionY="649.00390625" width="210.0625" height="105"/>
    </elements>
</model>